Added guards to helper functions
